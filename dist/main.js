!function(t){function e(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=h.p+""+t+"."+w+".hot-update.js",e.appendChild(n)}function n(t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var e=new XMLHttpRequest,n=h.p+""+w+".hot-update.json";e.open("GET",n,!0),e.timeout=1e4,e.send(null)}catch(i){return t(i)}e.onreadystatechange=function(){if(4===e.readyState)if(0===e.status)t(new Error("Manifest request to "+n+" timed out."));else if(404===e.status)t();else if(200!==e.status&&304!==e.status)t(new Error("Manifest request to "+n+" failed."));else{try{var i=JSON.parse(e.responseText)}catch(r){return void t(r)}t(null,i)}}}function i(t){function e(t,e){"ready"===T&&a("prepare"),C++,h.e(t,function(){function n(){C--,"prepare"===T&&(I[t]||l(t),0===C&&0===E&&u())}try{e.call(null,i)}finally{n()}})}var n=P[t];if(!n)return h;var i=function(e){return n.hot.active?P[e]?(P[e].parents.indexOf(t)<0&&P[e].parents.push(t),n.children.indexOf(e)<0&&n.children.push(e)):S=[t]:(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),S=[]),h(e)};for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&(d?Object.defineProperty(i,r,function(t){return{configurable:!0,enumerable:!0,get:function(){return h[t]},set:function(e){h[t]=e}}}(r)):i[r]=h[r]);return d?Object.defineProperty(i,"e",{enumerable:!0,value:e}):i.e=e,i}function r(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(t,n){if("undefined"==typeof t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._acceptedDependencies[t[i]]=n;else e._acceptedDependencies[t]=n},decline:function(t){if("undefined"==typeof t)e._selfDeclined=!0;else if("number"==typeof t)e._declinedDependencies[t]=!0;else for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:o,apply:f,status:function(t){return t?void x.push(t):T},addStatusHandler:function(t){x.push(t)},removeStatusHandler:function(t){var e=x.indexOf(t);e>=0&&x.splice(e,1)},data:_[t]};return e}function a(t){T=t;for(var e=0;e<x.length;e++)x[e].call(null,t)}function s(t){var e=+t+""===t;return e?+t:t}function o(t,e){if("idle"!==T)throw new Error("check() is only allowed in idle status");"function"==typeof t?(b=!1,e=t):(b=t,e=e||function(t){if(t)throw t}),a("check"),n(function(t,n){if(t)return e(t);if(!n)return a("idle"),void e(null,null);N={},A={},I={};for(var i=0;i<n.c.length;i++)A[n.c[i]]=!0;y=n.h,a("prepare"),m=e,g={};var r=0;l(r),"prepare"===T&&0===C&&0===E&&u()})}function c(t,e){if(A[t]&&N[t]){N[t]=!1;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=e[n]);0===--E&&0===C&&u()}}function l(t){A[t]?(N[t]=!0,E++,e(t)):I[t]=!0}function u(){a("ready");var t=m;if(m=null,t)if(b)f(b,t);else{var e=[];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&e.push(s(n));t(null,e)}}function f(e,n){function i(t){for(var e=[t],n={},i=e.slice();i.length>0;){var a=i.pop(),t=P[a];if(t&&!t.hot._selfAccepted){if(t.hot._selfDeclined)return new Error("Aborted because of self decline: "+a);if(0===a)return;for(var s=0;s<t.parents.length;s++){var o=t.parents[s],c=P[o];if(c.hot._declinedDependencies[a])return new Error("Aborted because of declined dependency: "+a+" in "+o);e.indexOf(o)>=0||(c.hot._acceptedDependencies[a]?(n[o]||(n[o]=[]),r(n[o],[a])):(delete n[o],e.push(o),i.push(o)))}}}return[e,n]}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}}if("ready"!==T)throw new Error("apply() is only allowed in ready status");"function"==typeof e?(n=e,e={}):e&&"object"==typeof e?n=n||function(t){if(t)throw t}:(e={},n=n||function(t){if(t)throw t});var o={},c=[],l={};for(var u in g)if(Object.prototype.hasOwnProperty.call(g,u)){var f=s(u),p=i(f);if(!p){if(e.ignoreUnaccepted)continue;return a("abort"),n(new Error("Aborted because "+f+" is not accepted"))}if(p instanceof Error)return a("abort"),n(p);l[f]=g[f],r(c,p[0]);for(var f in p[1])Object.prototype.hasOwnProperty.call(p[1],f)&&(o[f]||(o[f]=[]),r(o[f],p[1][f]))}for(var d=[],v=0;v<c.length;v++){var f=c[v];P[f]&&P[f].hot._selfAccepted&&d.push({module:f,errorHandler:P[f].hot._selfAccepted})}a("dispose");for(var m=c.slice();m.length>0;){var f=m.pop(),b=P[f];if(b){for(var x={},E=b.hot._disposeHandlers,C=0;C<E.length;C++){var I=E[C];I(x)}_[f]=x,b.hot.active=!1,delete P[f];for(var C=0;C<b.children.length;C++){var N=P[b.children[C]];if(N){var A=N.parents.indexOf(f);A>=0&&N.parents.splice(A,1)}}}}for(var f in o)if(Object.prototype.hasOwnProperty.call(o,f))for(var b=P[f],D=o[f],C=0;C<D.length;C++){var O=D[C],A=b.children.indexOf(O);A>=0&&b.children.splice(A,1)}a("apply"),w=y;for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(t[f]=l[f]);var k=null;for(var f in o)if(Object.prototype.hasOwnProperty.call(o,f)){for(var b=P[f],D=o[f],L=[],v=0;v<D.length;v++){var O=D[v],I=b.hot._acceptedDependencies[O];L.indexOf(I)>=0||L.push(I)}for(var v=0;v<L.length;v++){var I=L[v];try{I(o)}catch(j){k||(k=j)}}}for(var v=0;v<d.length;v++){var M=d[v],f=M.module;S=[f];try{h(f)}catch(j){if("function"==typeof M.errorHandler)try{M.errorHandler(j)}catch(j){k||(k=j)}else k||(k=j)}}return k?(a("fail"),n(k)):(a("idle"),void n(null,c))}function h(e){if(P[e])return P[e].exports;var n=P[e]={exports:{},id:e,loaded:!1,hot:r(e),parents:S,children:[]};return t[e].call(n.exports,n,n.exports,i(e)),n.loaded=!0,n.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(t,e){c(t,e),p&&p(t,e)};var d=!1;try{Object.defineProperty({},"x",{get:function(){}}),d=!0}catch(v){}var m,g,y,b=!0,w="cbfc86dddc5da196f028",_={},S=[],x=[],T="idle",E=0,C=0,I={},N={},A={},P={};return h.m=t,h.c=P,h.p="/dist/",h.h=function(){return w},i(0)(0)}([function(t,e,n){t.exports=n(9)},function(t,e){var n={status:{trafficTemp:0,trafficLoad:0},loadStatus:{currLinesInfo:0,trafficInfo:0},statusColor:[{color:"00cc33",instruction:"舒适"},{color:"EFEA3A",instruction:"较拥挤"},{color:"E71F1A",instruction:"拥挤"},{color:"1D1D1D",instruction:"极拥挤"}],refreshStatus:{},cache:{currLines:{},citylist:[],citylistByAdcode:null,curCity:{adcode:null,name:null},dataForDrw:{},cities:{},lines:{},stations:{},sug:{},stationsInfo:{},trafficNew:[],trafficInfo:[],convertData:{},tempTrafficinfo:[],stationspoi:{},offset:{},navlines:{},navStations:{},navStPixel:{}},timer:{},subwayFlag:1,param:null,nearlnglat:null,datas:[],info_datas:[],fileNameData:{1100:"beijing"},cityname:{1100:"北京"},cityListData:[{adcode:"1100",spell:"beijing",cityname:"北京"}],ns_svg:"http://www.w3.org/2000/svg",svgReady:!1,isNearTip:!1,w:document.documentElement.clientWidth,h:document.documentElement.clientHeight};t.exports=n},function(t,e,n){var i=n(4),r=n(1),a=(n(5),n(8)),s=n(3),o={currLines:{},t_top:0,t_left:0,moveX:0,moveY:0,font_size:12,specailPhone:!1,sortline:null,nearId:null,svgOffset:{left:0,top:0},w:r.w,h:r.h,isNearTip:r.isNearTip,svgReady:r.svgReady,defaultColor:r.statusColor[0].color,ns_svg:r.ns_svg,statusColor:r.statusColor,trafficInfo:r.cache.trafficInfo,stations:r.cache.stations,convertData:r.cache.convertData,stationsInfo:r.cache.stationsInfo,isSpecailPhone:function(){navigator.userAgent.toLowerCase()},draw:function(t,e){i("#subway-svg").remove(),this.currLines={},this.svgReady||this.initDraw(t,e)},initDraw:function(t,e){var n=this;n.t_left=0,n.t_top=0;var i,a,s,c,l=parseInt(n.w/2),u=parseInt(n.h/2),f={},h=(t.id,e.detail);if("true"==h){var p=n.getDetailStation(t,e);if(f.id=p,f.detail=!0,p){var d=r.cache.stations[p].p;s=parseInt(d.split(" ")[0]),c=parseInt(d.split(" ")[1])}else s=r.cache.curCity.offset.x,c=r.cache.curCity.offset.y}else{var v=n.getNearStation(t,e);if(f.id=v,f.detail=!1,n.nearId=v,v){var d=r.cache.stations[v].p;s=parseInt(d.split(" ")[0]),c=parseInt(d.split(" ")[1])}else s=r.cache.curCity.offset.x,c=r.cache.curCity.offset.y}i=s,a=c;var m=Number(l)-Number(i),g=Number(u)-Number(a);o.moveX=m,o.moveY=g,n.deletInProgress(t),n.drawSvgSubway(t,f,e)},deletInProgress:function(t){for(var e=this,n=0;n<t.lines.length;n++)"3"!=t.lines[n].su&&(e.currLines[t.lines[n].ls]=t.lines[n])},drawSvgSubway:function(t,e,n){var r=this;i("#subwayCanvas").css("display","none"),i(".station-out-box").css("display","none"),i("#subwaySvg").css("display","block");t.id;r.drwSwBox(t),setTimeout(function(){r.drawSvg(t,e,n),r.svgReady=!0},10)},drwSwBox:function(t){var e=this,n=document.getElementById("subwaySvg"),r=document.createElementNS(e.ns_svg,"svg");r.setAttribute("class","subway-content"),r.setAttribute("id","subway-svg"),r.setAttribute("adcode",t.id),r.style.width="2000px",r.style.height="2000px",r.setAttribute("width","2000px"),r.setAttribute("height","2000px"),n.appendChild(r);var a=document.createElementNS(e.ns_svg,"g"),s=document.createElementNS(e.ns_svg,"g");setTimeout(function(){i("#subway-svg").offset().width;r.style.left=-1e3+e.w/2+"px",r.style.top=-1e3+e.h/2+"px",e.svgOffset.left=-1e3+e.w/2,e.svgOffset.top=-1e3+e.h/2,a.setAttribute("id","subway-box"),r.appendChild(a),s.setAttribute("id","svg-g");var t,n;t=e.t_top,n=e.t_left,s.setAttribute("transform","translate(0,0) scale(1)"),a.appendChild(s)},0)},lineSort:function(){var t=this;t.sortline=[];var e;for(e in t.currLines){var n=parseInt(t.currLines[e].x),i=t.currLines[e].ls;t.sortline[n-1]=i}},addCaption:function(t){for(var e=this,n=i("#subway-caption"),a=0;a<e.sortline.length;a++){var s=i('<div class="line-caption"></div>'),o=r.cache.lines[e.sortline[a]].la,c="";c=o&&""!=o?r.cache.lines[e.sortline[a]].ln+'<div class="caption_la">( '+r.cache.lines[e.sortline[a]].la+" )</div>":r.cache.lines[e.sortline[a]].ln,s.html(c),s.attr("id","caption-"+e.sortline[a]),s.attr("lineid",e.sortline[a]),s.css("background","#"+r.cache.lines[e.sortline[a]].cl),n.append(s)}},drawSvg:function(t,e,n){var r=this,a="normal";r.lineSort(),r.drwSwLines(r.currLines,a),s.drwTrafficLinesDefer(r.currLines,a),r.drwSwStations(t,a,e),r.drwSwStationsName(t,a,10,20),r.drwSwLinesName(t,a),r.drawBg(r.currLines),r.addFilter(r.currLines),r.addHelp();var o=i(".near-station");if(o.length>0){var c=tip.getStCenter(o);tip.setCenter(c)}},drawBg:function(){var t=this,e=document.getElementById("svg-g"),n=document.createElementNS(t.ns_svg,"g");n.setAttribute("id","g-bg"),e.appendChild(n);var i=document.createElementNS(t.ns_svg,"rect");i.setAttribute("id","select_bg"),i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",2e3),i.setAttribute("height",2e3),n.appendChild(i)},drwSwLines:function(t,e){var n=this,r=document.getElementById("svg-g"),s=document.createElementNS(n.ns_svg,"g");if(s.setAttribute("id","g-line-"+e),"normal"==e){r.appendChild(s);for(var o in t){var c=t[o];a.drwDouble(s,c)}i("#refresh_content").show(),i(".filter_btn").show(),i(".help_btn").show(),console.log("主路画完！")}else if("select"==e){var l=document.getElementById("g-select");l.appendChild(s),a.drwDouble(s,t)}},drwSwLinesName:function(t,e){var n=this,i=t.linesNamePos,a=document.getElementById("svg-g"),s=document.createElementNS(n.ns_svg,"g");if(s.setAttribute("id","g-line-name"),"normal"==e)a.appendChild(s);else if("select"==e){var o=document.getElementById("g-select");o.appendChild(s)}for(var c in i)if(null!=i[c])for(var l=0;l<i[c].length;l++){var u=r.cache.lines[c].ln,f=u.length*n.font_size+6,h=20,p=r.cache.lines[c].cl,d=parseInt(i[c][l].split(" ")[0]),v=parseInt(i[c][l].split(" ")[1])-15,m=(document.getElementById("g-line-name"),document.createElementNS(n.ns_svg,"g"));m.setAttribute("transform","translate("+d+","+v+")"),m.setAttribute("class","line_name"),m.setAttribute("lineid",c);var g=document.createElementNS(n.ns_svg,"rect");g.setAttribute("rx",3),g.setAttribute("ry",3),g.setAttribute("width",f),g.setAttribute("height",h),g.setAttribute("fill","#"+p),m.appendChild(g);var y=document.createElementNS(n.ns_svg,"text");y.setAttribute("class","line_name_txt"),y.setAttribute("lineid",c),y.setAttribute("height",20),y.setAttribute("x",f/2),y.setAttribute("y",h/2),y.setAttribute("dy",4),y.setAttribute("fill","#fff"),y.setAttribute("text-anchor","middle"),y.textContent=u,m.appendChild(y),s.appendChild(m)}},drwSwStations:function(t,e,n){var a=this,s=document.getElementById("svg-g"),o=document.createElementNS(a.ns_svg,"g");if(o.setAttribute("id","g-station-"+e),"normal"==e)s.appendChild(o);else if("select"==e){var c=document.getElementById("g-select");c.appendChild(o)}else if("nav"==e){var l=document.getElementById("g-nav");l.appendChild(o)}var u=t.stations||t.st;i.each(u,function(t,e){if("1"==e.su){var s=document.createElementNS(a.ns_svg,"g");if(s.setAttribute("id","g-"+e.si),s.setAttribute("class","g-station"),o.appendChild(s),"0"==e.t){var c=document.createElementNS(a.ns_svg,"circle");c.setAttribute("cx",parseInt(e.p.split(" ")[0])),c.setAttribute("cy",parseInt(e.p.split(" ")[1])),c.setAttribute("r",5),c.setAttribute("fill","#FFF"),c.setAttribute("stroke-width",2),c.setAttribute("stroke","#"+e.cl),s.appendChild(c)}else if("1"==e.t){var l=document.createElementNS(a.ns_svg,"image");l.setAttribute("x",parseInt(e.p.split(" ")[0])-10),l.setAttribute("y",parseInt(e.p.split(" ")[1])-10),l.setAttribute("width",20),l.setAttribute("height",20),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","./img/subway/transfer-station.png"),s.appendChild(l)}var u=n&&n.id;if(u){if(e.si==u){console.log(e.si);var f=r.cache.stations[u],c=document.createElementNS(a.ns_svg,"circle");c.setAttribute("id","near-"+u),c.setAttribute("class","near-station"),c.setAttribute("cx",parseInt(f.p.split(" ")[0])),c.setAttribute("cy",parseInt(f.p.split(" ")[1])),c.setAttribute("r",14),c.setAttribute("fill","#007aff"),c.setAttribute("fill-opacity",.4),s.appendChild(c),n.detail||i("#tip-content").length>0||(a.nearTip(u),i("#tip-content").addClass("open"))}}else a.clearNearTip();var h=document.createElementNS(a.ns_svg,"circle");h.setAttribute("id","st-"+e.si),h.setAttribute("class","station_obj"),h.setAttribute("cx",parseInt(e.p.split(" ")[0])),h.setAttribute("cy",parseInt(e.p.split(" ")[1])),h.setAttribute("station_id",e.si),h.setAttribute("station_name",e.n),h.setAttribute("station_poiid",e.poiid),h.setAttribute("station_lon",e.sl.split(",")[0]),h.setAttribute("station_lat",e.sl.split(",")[1]),h.setAttribute("r",13),h.setAttribute("fill","#FFF"),h.setAttribute("fill-opacity","0"),s.appendChild(h);for(var p=[],d=0;d<e.r.split("|").length;d++)p.push(e.r.split("|")[d]);h.setAttribute("line_id",p)}})},drwSwStationsName:function(t,e,n,r){var a=this,s=t.stations||t.st||t,o=document.getElementById("svg-g"),c=document.createElementNS(a.ns_svg,"g");if(c.setAttribute("id","g-station-name-"+e),"normal"==e)o.appendChild(c);else if("select"==e){var l=document.getElementById("g-select");l.appendChild(c)}else if("nav"==e){var u=document.getElementById("g-nav");u.appendChild(c)}var f=document.createElementNS(a.ns_svg,"g");f.setAttribute("id","g-name"),c.appendChild(f),i.each(s,function(t,e){if("1"==e.su&&"2"!=e.t){var i=document.createElementNS(a.ns_svg,"text");i.style.fontSize=n+"px",i.setAttribute("id","name-"+e.si),i.setAttribute("name",e.n),i.textContent=e.n;var s,o,c,l=e.lg;s="0"==l||"4"==l?"middle":"left",i.setAttribute("text-anchor",s),"0"==l||"4"==l?o=parseInt(e.p.split(" ")[0]):"5"==l||"6"==l||"7"==l?o=parseInt(e.p.split(" ")[0])-e.n.length*n-10:"1"!=l&&"2"!=l&&"3"!=l||(o=parseInt(e.p.split(" ")[0])+10),"2"==l||"6"==l?c=parseInt(e.p.split(" ")[1])+5:"0"==l||"1"==l||"7"==l?c=parseInt(e.p.split(" ")[1])-10:"3"!=l&&"4"!=l&&"5"!=l||(c=parseInt(e.p.split(" ")[1])+r),i.setAttribute("x",o),i.setAttribute("y",c),f.appendChild(i)}})},addFilter:function(t){var e=this,n=i(".fliter_detail");n.html(" ");var a=[];a.push("<li class='fliter_item' id='caption-allLines' lineid='caption-allLines' name='全部地铁'>"),a.push("<span class='line_name' style='margin-left: 0'>全部地铁线路</span>"),a.push("</li>"),n.html(a.join(""));for(var s=0;s<e.sortline.length;s++){var o=i('<li class="fliter_item"></li>');s==e.sortline.length-1&&(o=i('<li class="fliter_item fliter_item_last"></li>'));var c=r.cache.lines[e.sortline[s]].la,l="",u="";u=c&&""!=c?r.cache.lines[e.sortline[s]].ln+'<b class="line_name_la">( '+r.cache.lines[e.sortline[s]].la+" )</b>":r.cache.lines[e.sortline[s]].ln,l='<span class="line_color" style="background:#'+r.cache.lines[e.sortline[s]].cl+'"></span><span class="line_name">'+u+"</span>",o.html(l),o.attr("id","caption-"+e.sortline[s]),o.attr("lineid",e.sortline[s]),o.attr("name",u.split("/")[0].toString().substr(0,4)),n.append(o)}i(".filter_btn").show().css({"z-index":"20"})},addHelp:function(){for(var t=this,e=i(".help_content"),n=0;n<t.statusColor.length;n++){var r=i("<div class='help_item'></div>"),a="";a='<span class="help_color" style="background:#'+t.statusColor[n].color+'"></span><span class="help_text"><span style="float: left">'+t.statusColor[n].instruction+"</span></span>",r.html(a),e.append(r)}var s=i('<div class="help_item help_warning"></div>'),o='<span class="help_color_warning"></span> <span class="help_text"> <span style="float: left">限流站点</span> </span>';s.html(o),e.append(s)},nearTip:function(t){var e,n,r=this,a=i(".overlays"),s=i("#near-"+t),o=s.offset().left,c=s.offset().top,l="t",u=i('<div class="tip-near-content" id="tip-near-content"><div class="tip-near tip-'+l+'"><img class="near-img" width=100 src="./img/subway/near_'+l+'.png"/></div></div>');a.append(u);var f=i(".overlays"),h=parseInt(f.css("left"))||0,p=parseInt(f.css("top"))||0;e=o+28*tip.allScale/2-h,n=c-p,i(".tip-near-content").css({top:n+"px",left:e+"px"}),r.isNearTip=!0},clearNearTip:function(){var t=i(".tip-content");t.length>0&&t.remove()},getDistance:function(t,e){var n=6378137,i=Math.PI/180,r=(e.lat-t.lat)*i,a=(e.lng-t.lng)*i,s=t.lat*i,o=e.lat*i,c=Math.sin(r/2),l=Math.sin(a/2),u=c*c+l*l*Math.cos(s)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},toLnglat:function(t){if(!t)return!1;var e=t.split(","),n=e[0],i=e[1];return{lng:n,lat:i}},getDetailStation:function(t,e){var n=this,i=e.poiid,a=(e.lnglat,r.cache.stationspoi[i]);return a?a.si:n.getNearStation(t,e)},getNearStation:function(t,e){var n,r,a,s=this,o=e.lnglat,c=-1,l=0,u=t.stations,f=s.toLnglat(o);return i.each(u,function(t,e){n=s.toLnglat(e.sl),a=e.si,l=""!=e.sl?s.getDistance(f,n):1e5,(-1==c||c>l)&&(c=l,r=a)}),1e4>c?r:!1}};t.exports=o},function(t,e,n){n(7);var i=n(1),r=(n(2),n(8)),a=n(6),s={timer:null,trafficInfo:[],refreshStatus:"",statusColor:i.statusColor,ns_svg:i.ns_svg,loadTraffic:function(t,e,n){i.loadStatus.trafficInfo=0;var r=this,s="http://223.72.210.20:8388/PublicTripProvide/LoadAfcJtlDataJson?ask=t8ai8t4s3acb1ce";amapCache.loadData(s,function(t){i.cache.trafficInfo=[],i.refreshStatus="";for(var e=t.jtlList.length,n=0;e>n;n++){var a={},s=t.jtlList[n].flashCode,o=s.slice(3).split("_")[0],c=s.slice(3).split("_")[1].slice(0,9),l=t.jtlList[n].loadData,u=t.jtlList[n].startTime;a.startAcc=o,a.endAcc=c,a.loadRate=l,a.refreshTime=u,a.Acc2Acc=s.slice(3,22),l>=0&&.6>=l?a.rateColor=i.statusColor[0].color:l>.6&&.9>=l?a.rateColor=i.statusColor[1].color:l>.9&&1.1>=l?a.rateColor=i.statusColor[2].color:l>1.1?a.rateColor=i.statusColor[3].color:a.rateColor="CCCCCC",i.cache.trafficInfo.push(a)}i.loadStatus.trafficInfo=1,console.log("路况信息请求完成!"),i.refreshStatus=r.formatTime(i.cache.trafficInfo[0].refreshTime).trafficLoad},function(){i.loadStatus.trafficInfo=2,a.loadingOver(),setTimeout(function(){a.refreshError()},1e3)})},addTrafficInfo:function(t){var e=i.cache.cities[t];for(var n in e.lines)for(var r in e.lines[n].st2st)for(var a in i.cache.trafficInfo)i.cache.trafficInfo[a].Acc2Acc==e.lines[n].st2st[r].dA.slice(3)&&(e.lines[n].st2st[r].loadRate=i.cache.trafficInfo[a].loadRate,e.lines[n].st2st[r].refreshTime=i.cache.trafficInfo[a].refreshTime,e.lines[n].st2st[r].rateColor=i.cache.trafficInfo[a].rateColor);console.log("路况信息编译成功！"),console.log("新的drwData",e)},drwTrafficLinesDefer:function(t,e){var n=this;if("normal"==e)clearTimeout(s.timer),s.timer=setTimeout(function(){if(1==i.loadStatus.trafficInfo&&1==i.loadStatus.currLinesInfo){var r=i.cache.curCity.adcode;s.addTrafficInfo(r);var o=document.getElementById("svg-g"),c=document.getElementById("g-station-normal"),l=document.createElementNS(n.ns_svg,"g");l.setAttribute("id","g-traffic-"+e),o.insertBefore(l,c);for(var u in t){var f=t[u];n.drwTrafficFromSever(l,f)}console.log("路况信息已展示！"),a.refreshSuccess()}else 2==i.loadStatus.trafficInfo||2==i.loadStatus.currLinesInfo?clearTimeout(s.timer):(console.log("路况信息错误!","traffic",i.loadStatus.trafficInfo,"currLines",i.loadStatus.currLinesInfo),s.drwTrafficLinesDefer(t,e))},10);else if("select"==e){var r=document.getElementById("g-station-select"),o=document.getElementById("g-select"),c=document.createElementNS(n.ns_svg,"g");c.setAttribute("id","g-traffic-"+e),o.insertBefore(c,r),n.drwTrafficFromSever(c,t)}},drwTrafficFromSever:function(t,e){var n={},i={};for(var a in e.st2st){if("right"==e.st2st[a].rd){var s=e.st2st[a].path,o=r.doublePathInfo(s,26).RightPath,c=e.st2st[a].rateColor;i.path=o,i.color="AF272B",i.color=c,i.direction=e.st2st[a].dN,i.loadRate=e.st2st[a].loadRate,i.reflineName=e.st2st[a].rln,r.drwlines(t,i,e)}if("left"==e.st2st[a].rd){var l=e.st2st[a].path,u=r.doublePathInfo(l,26).LeftPath,f=e.st2st[a].rateColor;n.path=u,n.color="C99616",n.color=f,n.direction=e.st2st[a].dN,n.loadRate=e.st2st[a].loadRate,n.reflineName=e.st2st[a].rln,r.drwlines(t,n,e)}}},formatTime:function(t){var e={},n=t.replace(/-/g,"/"),i=new Date(n).getTime(),r=6e4,a=60*r,s=24*a,o=(new Date).getTime(),c=o-i;if(0>c)return!1;var l,u=c/s,f=c/a,h=c/r,p=t.substr(0,10).replace(/-/g,"/"),d=new Date(p).getTime(),v=new Date,m=v.getFullYear(),g=v.getMonth()+1,y=v.getDate(),b=m+"/"+g+"/"+y,w=new Date(b).getTime(),_=w-d,S=t.split(" ")[1].toString().substr(0,8),x=t.split(" ")[1].toString().substr(0,5),T={};if(864e5>_&&_>=0)T=S,l=x;else if(864e5==_)T=S,l="昨天"+x;else if(1728e5==_)T=S,l="前天"+x;else{var E=t.split(" ")[0].toString().split("-");T=E[1]+"月"+E[2]+"日",l=E[0]+"年"+E[1]+"月"+E[2]+"日"}return e.trafficLoad=T,u>=1?result="更新于"+parseInt(u)+"天前发布":f>=1&&24>f?result="更新于"+parseInt(f)+"小时前发布":h>=30&&60>h?result="更新于"+parseInt(h)+"分钟前发布":30>h&&h>0?result="更新于"+l:result="刚刚",e.trafficTemp=result,e}};t.exports=s},function(t,e,n){var i,r,a=function(){function t(t){return null==t?String(t):U[W.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function a(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function o(t){return A.call(t,function(t){return null!=t})}function c(t){return t.length>0?x.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in O?O[t]:O[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||k[l(t)]?e:e+"px"}function h(t){var e,n;return D[t]||(e=P.createElement(t),P.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),D[t]=n),D[t]}function p(t){return"children"in t?N.call(t.children):x.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(S in e)n&&(a(e[S])||G(e[S]))?(a(e[S])&&!a(t[S])&&(t[S]={}),G(e[S])&&!G(t[S])&&(t[S]=[]),d(t[S],e[S],n)):e[S]!==_&&(t[S]=e[S])}function v(t,e){return null==e?x(t):x(t).filter(e)}function m(t,n,i,r){return e(n)?n.call(t,i,r):n}function g(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className||"",i=n&&n.baseVal!==_;return e===_?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?x.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)w(t.childNodes[n],e)}var _,S,x,T,E,C,I=[],N=I.slice,A=I.filter,P=window.document,D={},O={},k={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,j=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/^(?:body|html)$/i,F=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],B=["after","prepend","before","append"],H=P.createElement("table"),z=P.createElement("tr"),q={tr:P.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:z,th:z,"*":P.createElement("div")},X=/complete|loaded|interactive/,Y=/^[\w-]*$/,U={},W=U.toString,V={},Z=P.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return V.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,a=!r;return a&&(r=Z).appendChild(t),i=~V.qsa(r,e).indexOf(t),a&&Z.removeChild(t),i},E=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return A.call(t,function(e,n){return t.indexOf(e)==n})},V.fragment=function(t,e,n){var i,r,s;return j.test(t)&&(i=x(P.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(M,"<$1></$2>")),e===_&&(e=L.test(t)&&RegExp.$1),e in q||(e="*"),s=q[e],s.innerHTML=""+t,i=x.each(N.call(s.childNodes),function(){s.removeChild(this)})),a(n)&&(r=x(i),x.each(n,function(t,e){R.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},V.Z=function(t,e){return t=t||[],t.__proto__=x.fn,t.selector=e||"",t},V.isZ=function(t){return t instanceof V.Z},V.init=function(t,n){var i;if(!t)return V.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&L.test(t))i=V.fragment(t,RegExp.$1,n),t=null;else{if(n!==_)return x(n).find(t);i=V.qsa(P,t)}else{if(e(t))return x(P).ready(t);if(V.isZ(t))return t;if(G(t))i=o(t);else if(r(t))i=[t],t=null;else if(L.test(t))i=V.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==_)return x(n).find(t);i=V.qsa(P,t)}}return V.Z(i,t)},x=function(t,e){return V.init(t,e)},x.extend=function(t){var e,n=N.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},V.qsa=function(t,e){var n,r="#"==e[0],a=!r&&"."==e[0],s=r||a?e.slice(1):e,o=Y.test(s);return i(t)&&o&&r?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:N.call(o&&!r?a?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},x.contains=P.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},x.type=t,x.isFunction=e,x.isWindow=n,x.isArray=G,x.isPlainObject=a,x.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},x.inArray=function(t,e,n){return I.indexOf.call(e,t,n)},x.camelCase=E,x.trim=function(t){return null==t?"":String.prototype.trim.call(t)},x.uuid=0,x.support={},x.expr={},x.map=function(t,e){var n,i,r,a=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&a.push(n);else for(r in t)n=e(t[r],r),null!=n&&a.push(n);return c(a)},x.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},x.grep=function(t,e){return A.call(t,e)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){U["[object "+e+"]"]=e.toLowerCase()}),x.fn={forEach:I.forEach,reduce:I.reduce,push:I.push,sort:I.sort,indexOf:I.indexOf,concat:I.concat,map:function(t){return x(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return x(N.apply(this,arguments))},ready:function(t){return X.test(P.readyState)&&P.body?t(x):P.addEventListener("DOMContentLoaded",function(){t(x)},!1),this},get:function(t){return t===_?N.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return I.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):x(A.call(this,function(e){return V.matches(e,t)}))},add:function(t,e){return x(C(this.concat(x(t,e))))},is:function(t){return this.length>0&&V.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==_)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?N.call(t):x(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return x(n)},has:function(t){return this.filter(function(){return r(t)?x.contains(this,t):x(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:x(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:x(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?x(t).filter(function(){var t=this;return I.some.call(n,function(e){return x.contains(e,t)})}):1==this.length?x(V.qsa(this[0],t)):this.map(function(){return V.qsa(this,t)}):x()},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=x(t));n&&!(r?r.indexOf(n)>=0:V.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return x(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=x.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(C(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return N.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return A.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return x.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=x(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){x(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){x(this[0]).before(t=x(t));for(var e;(e=t.children()).length;)t=e.first();x(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=x(this),r=i.contents(),a=n?t.call(this,e):t;r.length?r.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=x(this);(t===_?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return x(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return x(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;x(this).empty().append(m(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=m(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(S in t)g(this,S,t[S]);else g(this,t,m(this,e,n,this.getAttribute(t)));
}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:_},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){g(this,t)},this)})},prop:function(t,e){return t=J[t]||t,1 in arguments?this.each(function(n){this[t]=m(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(F,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?b(i):_},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=x(this),i=m(this,t,e,n.offset()),r=n.offsetParent().offset(),a={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof e)return r.style[E(e)]||i.getPropertyValue(e);if(G(e)){var a={};return x.each(e,function(t,e){a[e]=r.style[E(e)]||i.getPropertyValue(e)}),a}}var s="";if("string"==t(e))n||0===n?s=l(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(S in e)e[S]||0===e[S]?s+=l(S)+":"+f(S,e[S])+";":this.each(function(){this.style.removeProperty(l(S))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(x(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?I.some.call(this,function(t){return this.test(y(t))},u(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){T=[];var n=y(this),i=m(this,t,e,n);i.split(/\s+/g).forEach(function(t){x(this).hasClass(t)||T.push(t)},this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===_)return y(this,"");T=y(this),m(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(u(t)," ")}),y(this,T.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=x(this),r=m(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===_?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===_?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===_?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=$.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(x(t).css("margin-top"))||0,n.left-=parseFloat(x(t).css("margin-left"))||0,i.top+=parseFloat(x(e[0]).css("border-top-width"))||0,i.left+=parseFloat(x(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||P.body;t&&!$.test(t.nodeName)&&"static"==x(t).css("position");)t=t.offsetParent;return t})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});x.fn[t]=function(r){var a,s=this[0];return r===_?n(s)?s["inner"+e]:i(s)?s.documentElement["scroll"+e]:(a=this.offset())&&a[t]:this.each(function(e){s=x(this),s.css(t,m(this,r,e,s[t]()))})}}),B.forEach(function(e,n){var i=n%2;x.fn[e]=function(){var e,r,a=x.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:V.fragment(n)}),s=this.length>1;return a.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var o=x.contains(P.documentElement,r);a.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return x(t).remove();r.insertBefore(t,e),o&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},x.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return x(t)[e](this),this}}),V.Z.prototype=x.fn,V.uniq=C,V.deserializeValue=b,x.zepto=V,x}();window.Zepto=a,void 0===window.$&&(window.$=a),i=[],r=function(){return a}.apply(e,i),!(void 0!==r&&(t.exports=r)),function(t){function e(t){return t._zid||(t._zid=h++)}function n(t,n,a,s){if(n=i(n),n.ns)var o=r(n.ns);return(m[e(t)]||[]).filter(function(t){return t&&(!n.e||t.e==n.e)&&(!n.ns||o.test(t.ns))&&(!a||e(t.fn)===e(a))&&(!s||t.sel==s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function a(t,e){return t.del&&!y&&t.e in b||!!e}function s(t){return w[t]||y&&b[t]||t}function o(n,r,o,c,u,h,p){var d=e(n),v=m[d]||(m[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(o);var r=i(e);r.fn=o,r.sel=u,r.e in w&&(o=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var d=h||o;r.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=c;var e=d.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=v.length,v.push(r),"addEventListener"in n&&n.addEventListener(s(r.e),r.proxy,a(r,p))})}function c(t,i,r,o,c){var l=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,o).forEach(function(e){delete m[l][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,a(e,c))})})}function l(e,n){return!n&&e.isDefaultPrevented||(n||(n=e),t.each(T,function(t,i){var r=n[t];e[t]=function(){return this[i]=_,r&&r.apply(n,arguments)},e[i]=S}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=_)),e}function u(t){var e,n={originalEvent:t};for(e in t)x.test(e)||t[e]===f||(n[e]=t[e]);return l(n,t)}var f,h=1,p=Array.prototype.slice,d=t.isFunction,v=function(t){return"string"==typeof t},m={},g={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:o,remove:c},t.proxy=function(n,i){var r=2 in arguments&&p.call(arguments,2);if(d(n)){var a=function(){return n.apply(i,r?r.concat(p.call(arguments)):arguments)};return a._zid=e(n),a}if(v(i))return r?(r.unshift(n[i],n),t.proxy.apply(null,r)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var _=function(){return!0},S=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,a){var s,l,h=this;return e&&!v(e)?(t.each(e,function(t,e){h.on(t,n,i,e,a)}),h):(v(n)||d(r)||r===!1||(r=i,i=n,n=f),(d(i)||i===!1)&&(r=i,i=f),r===!1&&(r=S),h.each(function(f,h){a&&(s=function(t){return c(h,t.type,r),r.apply(this,arguments)}),n&&(l=function(e){var i,a=t(e.target).closest(n,h).get(0);return a&&a!==h?(i=t.extend(u(e),{currentTarget:a,liveFired:h}),(s||r).apply(a,[i].concat(p.call(arguments,1)))):void 0}),o(h,e,r,i,n,l||s)}))},t.fn.off=function(e,n,i){var r=this;return e&&!v(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(v(n)||d(i)||i===!1||(i=n,n=f),i===!1&&(i=S),r.each(function(){c(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=v(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=n,this.each(function(){e.type in b&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,a;return this.each(function(s,o){r=u(v(e)?t.Event(e):e),r._args=i,r.target=o,t.each(n(o,e.type||e),function(t,e){return a=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){v(t)||(e=t,t=e.type);var n=document.createEvent(g[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),l(n)}}(a),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function a(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function s(t,e,i,r){var a=i.context,s="success";i.success.call(a,t,s,e),r&&r.resolveWith(a,[t,s,e]),n(i,a,"ajaxSuccess",[e,i,t]),c(s,e,i)}function o(t,e,i,r,a){var s=r.context;r.error.call(s,i,e,t),a&&a.rejectWith(s,[i,e,t]),n(r,s,"ajaxError",[i,r,t||e]),c(e,i,r)}function c(t,e,i){var a=i.context;i.complete.call(a,e,t),n(i,a,"ajaxComplete",[e,i]),r(i)}function l(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==x?"html":t==S?"json":w.test(t)?"script":_.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function p(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function d(e,n,i,r){var a,s=t.isArray(n),o=t.isPlainObject(n);t.each(n,function(n,c){a=t.type(c),r&&(n=i?r:r+"["+(o||"object"==a||"array"==a?n:"")+"]"),!r&&s?e.add(c.name,c.value):"array"==a||!i&&"object"==a?d(e,c,i,n):e.add(n,c)})}var v,m,g=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,_=/^(?:text|application)\/xml/i,S="application/json",x="text/html",T=/^\s*$/,E=y.createElement("a");E.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,c=e.jsonpCallback,l=(t.isFunction(c)?c():c)||"jsonp"+ ++g,u=y.createElement("script"),f=window[l],h=function(e){t(u).triggerHandler("error",e||"abort")},p={abort:h};return n&&n.promise(p),t(u).on("load error",function(a,c){clearTimeout(r),t(u).off().remove(),"error"!=a.type&&i?s(i[0],p,e,n):o(null,c||"error",p,e,n),window[l]=f,i&&t.isFunction(f)&&f(i[0]),f=i=void 0}),a(p,e)===!1?(h("abort"),p):(window[l]=function(){i=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),y.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){h("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,r=t.extend({},e||{}),c=t.Deferred&&t.Deferred();for(v in t.ajaxSettings)void 0===r[v]&&(r[v]=t.ajaxSettings[v]);i(r),r.crossDomain||(n=y.createElement("a"),n.href=r.url,n.href=n.href,r.crossDomain=E.protocol+"//"+E.host!=n.protocol+"//"+n.host),r.url||(r.url=window.location.toString()),h(r);var p=r.dataType,d=/\?.+=\?/.test(r.url);if(d&&(p="jsonp"),r.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(r.url=f(r.url,"_="+Date.now())),"jsonp"==p)return d||(r.url=f(r.url,r.jsonp?r.jsonp+"=?":r.jsonp===!1?"":"callback=?")),t.ajaxJSONP(r,c);var g,b=r.accepts[p],w={},_=function(t,e){w[t.toLowerCase()]=[t,e]},S=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,x=r.xhr(),C=x.setRequestHeader;if(c&&c.promise(x),r.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",b||"*/*"),(b=r.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(b)),(r.contentType||r.contentType!==!1&&r.data&&"GET"!=r.type.toUpperCase())&&_("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(m in r.headers)_(m,r.headers[m]);if(x.setRequestHeader=_,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=l,clearTimeout(g);var e,n=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==S){p=p||u(r.mimeType||x.getResponseHeader("content-type")),e=x.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=x.responseXML:"json"==p&&(e=T.test(e)?null:t.parseJSON(e))}catch(i){n=i}n?o(n,"parsererror",x,r,c):s(e,x,r,c)}else o(x.statusText||null,x.status?"error":"abort",x,r,c)}},a(x,r)===!1)return x.abort(),o(null,"abort",x,r,c),x;if(r.xhrFields)for(m in r.xhrFields)x[m]=r.xhrFields[m];var I="async"in r?r.async:!0;x.open(r.type,r.url,I,r.username,r.password);for(m in w)C.apply(x,w[m]);return r.timeout>0&&(g=setTimeout(function(){x.onreadystatechange=l,x.abort(),o(null,"timeout",x,r,c)},r.timeout)),x.send(r.data?r.data:null),x},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,a=this,s=e.split(/\s/),o=p(e,n,i),c=o.success;return s.length>1&&(o.url=s[0],r=s[1]),o.success=function(e){a.html(r?t("<div>").html(e.replace(b,"")).find(r):e),c&&c.apply(a,arguments)},t.ajax(o),this};var C=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(C(e)+"="+C(n))},d(i,e,n),i.join("&").replace(/%20/g,"+")}}(a),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){return t.forEach?t.forEach(r):void i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,a){n=a.type,e=a.name,e&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||a.checked)&&r(t(a).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(a),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(a)},function(t,e,n){n(7);var i=n(4),r=n(1),a=n(2),s=n(6),o=n(3),c=n(11),l=n(13),u={swInit:function(){var t=this;l.attach(document.body),amapCache.init({complete:function(){t.initCity(),c.init(),s.loadingOver()}})},initCity:function(){var t=this;t.showCity(),i(window).on("hashchange",function(){var e=decodeURIComponent(window.location.hash).replace(/^\#/,""),n=c.param2json(e);null!=n&&t.showStation(n)})},showCity:function(){var t=this,e={city:"1100"};r.param=e;var n=e.city;return r.fileNameData[n]?(r.subwayFlag=1,i("#subway").show(),i(".city_name").html(r.cityname[n]),document.title=r.cityname[n]+"地铁图",r.svgReady=!1,s.loading(),i(".filter_btn").hide(),void t.loadData(n,function(t){s.loadingOver(),a.draw(t,e)})):(r.subwayFlag=0,s.cityChange())},showStation:function(t){var e=t.station;if(e){var n=r.cache.stations[e]||r.cache.stationspoi[e],o="st-"+n.si,c=i("#"+o);r.isNearTip&&a.clearNearTip(),s.openTip(c);var l=s.getStCenter(c);s.setCenter(l)}},loadData:function(t,e){var n=this,i=r.cache,a=t,s=r.fileNameData[t];i.cities[a]?(i.curCity.adcode=a,i.curCity.name=i.cities[a].name,i.curCity.offset=i.offset[a],e(i.cities[a])):(n.loadMainData(a,s,e),n.loadStInfo(a,s),o.loadTraffic(a,s))},loadStInfo:function(t,e){var n="data/"+t+"_info_"+e+".json";amapCache.loadData(n,function(t){for(var e=0;e<t.l.length;e++)for(var n=0;n<t.l[e].st.length;n++)r.cache.stationsInfo[t.l[e].st[n].si]=t.l[e].st[n];console.log("站点首末车时间请求完成!")},function(){alert("地铁站点数据加载失败！")})},loadMainData:function(t,e,n){var i=this;r.loadStatus.currLinesInfo=0;var a="data/"+t+"_drw_"+e+".json";amapCache.loadData(a,function(e){s.loading(),i.buildCurLinesData(t,e),r.loadStatus.currLinesInfo=1,n(r.cache.cities[t])},function(){r.loadStatus.currLinesInfo=2,alert("城市地铁数据加载失败！"),r.subwayFlag=0})},buildCurLinesData:function(t,e){var n=r.cache;n.sug[t]={},n.dataForDrw[e.i]=e,n.cities[e.i]=n.cities[e.i]||{},n.cities[e.i].name=e.s,n.cities[e.i].id=e.i,n.cities[e.i].offset=e.o,n.cities[e.i].lines=[],n.cities[e.i].linesNamePos={},n.cities[e.i].stations={},n.cities[e.i].zolines={},n.cities[e.i].zostations=[];var i=e.o.split(",");n.offset[e.i]=n.offset[e.i]||{},n.offset[e.i].x=i[0],n.offset[e.i].y=i[1];for(var a=1e3-Number(i[0]),o=1e3-Number(i[1]),c={},l=0;l<e.l.length;l++)if("1"==e.l[l].su){for(var u=e.l[l].c,f=0;f<u.length;f++){var h=u[f].split(" ");u[f]=Number(h[0])+a+" "+(Number(h[1])+o)}e.l[l].c=u,e.l[l].linesNamePos={},e.l[l].linesNamePos[e.l[l].ls]=e.l[l].lp,e.l[l].stname=[];for(var p=0;p<e.l[l].st.length;p++){e.l[l].stname.push(e.l[l].st[p].n);var d=e.l[l].st[p].p.split(" ");e.l[l].st[p].p=Number(d[0])+a+" "+(Number(d[1])+o);for(var v=e.l[l].st[p].rs.split("|"),m=[],g=0;g<v.length;g++){var y=v[g].split(" ");m.push(Number(y[0])+a+" "+(Number(y[1])+o))}if(e.l[l].st[p].rs=m.join("|"),"1"==e.l[l].st[p].su){var b=e.l[l].st[p];n.cities[e.i].stations[b.si]=b,n.cities[e.i].stations[b.si].cl=e.l[l].cl,n.stations[b.si]=b,n.stations[b.si].cl=e.l[l].cl,c[b.sp.split(" ").join("").toLowerCase()+"|"+b.n.toLowerCase()]=b,n.stationspoi[b.poiid]=b,n.navStations[b.n]=b,n.navStPixel[b.p]=b}}var w=e.l[l].lp;if(w){for(var _=0;_<w.length;_++){var S=w[_].split(" ");w[_]=Number(S[0])+a+" "+(Number(S[1])+o)}e.l[l].lp=w}var x=e.l[l].st2st;for(var T in x){var E=x[T].path;for(var C in E){var I=E[C].split(" ");E[C]=Number(I[0])+a+" "+(Number(I[1])+o)}var N=x[T].sP.split(" ");x[T].sP=Number(N[0])+a+" "+(Number(N[1])+o);var A=x[T].eP.split(" ");x[T].eP=Number(A[0])+a+" "+(Number(A[1])+o),x[T].dP=x[T].sP+"-to-"+x[T].eP}n.cities[e.i].linesNamePos[e.l[l].ls]=e.l[l].lp,n.cities[e.i].lines.push(e.l[l]),n.lines[e.l[l].ls]=e.l[l];var P=e.l[l].li&&e.l[l].li.split("|");if(P)for(var D=0;D<P.length;D++)n.navlines[P[D]]=e.l[l]}n.sug[t]=c,n.curCity.adcode=t,n.curCity.name=n.cities[t].name,n.curCity.offset=n.offset[t];n.cities[t];console.log("纯地铁信息编译完成!"),s.loadingOver()},Traffic2JSON:function(t){var e=this,n=t.l;for(var i in n)for(var a in r.cache.convertData)if(r.cache.convertData[a].line_id==n[i].ls)for(var s=r.cache.convertData[a].stations.length,o=0;s>o;o++){var c=r.cache.convertData[a].stations[o].Acc,l=r.cache.convertData[a].stations[o].Name,u=n[i],f=u.st,h=u.c;for(var p in r.cache.trafficInfo)if(r.cache.trafficInfo[p].startAcc==c){r.cache.trafficInfo[p].startName=l,r.cache.trafficInfo[p].reflineId=u.ls,r.cache.trafficInfo[p].reflineName=u.ln;for(var d in f)f[d].n==l&&(r.cache.trafficInfo[p].startPos=f[d].p);r.cache.trafficInfo[p].hasOwnProperty("startPos")||console.log(r.cache.trafficInfo[p],p);var v=r.cache.trafficInfo[p].startPos;for(var m in h)h[m]==v&&(r.cache.trafficInfo[p].startIndex=m)}for(var p in r.cache.trafficInfo)if(r.cache.trafficInfo[p].endAcc==c){r.cache.trafficInfo[p].endName=l;for(var d in f)f[d].n==l&&(r.cache.trafficInfo[p].endPos=f[d].p);var g=r.cache.trafficInfo[p].endPos;r.cache.trafficInfo[p].hasOwnProperty("endPos")||console.log(r.cache.trafficInfo[p],p);for(var m in h)h[m]==g&&(r.cache.trafficInfo[p].endIndex=m)}for(var p in r.cache.trafficInfo)r.cache.trafficInfo[p].endIndex-r.cache.trafficInfo[p].startIndex>30?r.cache.trafficInfo[p].endIndex=0:e.cache.trafficInfo[p].startIndex-r.cache.trafficInfo[p].endIndex>30&&(r.cache.trafficInfo[p].startIndex=0),r.cache.trafficInfo[p].direction=r.cache.trafficInfo[p].startName+"-to-"+r.cache.trafficInfo[p].endName;for(var p in r.cache.trafficInfo){var y=r.cache.trafficInfo[p].loadRate,b={};if(r.cache.trafficInfo[p].reflineId==u.ls){var w=Number(r.cache.trafficInfo[p].startIndex),_=Number(r.cache.trafficInfo[p].endIndex);_>w?(r.cache.trafficInfo[p].path=h.slice(w,_+1),r.cache.trafficInfo[p].ref_direct="right"):(r.cache.trafficInfo[p].path=h.slice(_,w+1),r.cache.trafficInfo[p].ref_direct="left")}b=y>=0&&.6>=y?"00cc33":y>.6&&.9>=y?"EFEA3A":y>.9&&1.1>=y?"E71F1A":y>1.1?"1D1D1D":"CCCCCC",r.cache.trafficInfo[p].color=b}}console.log("路况信息整理完毕！");for(var a in n){var u=n[a],S={};S.lineId=u.ls,S.lineName=u.ln,S.sections=[];for(var p in r.cache.trafficInfo)if(u.ls==r.cache.trafficInfo[p].reflineId){var x={};x.dA="Acc"+r.cache.trafficInfo[p].startAcc+"_"+r.cache.trafficInfo[p].endAcc,x.dP=r.cache.trafficInfo[p].startPos+"-to-"+r.cache.trafficInfo[p].endPos,x.dN=r.cache.trafficInfo[p].direction,x.sP=r.cache.trafficInfo[p].startPos,x.sN=r.cache.trafficInfo[p].startName,x.eP=r.cache.trafficInfo[p].endPos,x.eN=r.cache.trafficInfo[p].endName,x.rli=r.cache.trafficInfo[p].reflineId,x.rln=r.cache.trafficInfo[p].reflineName,x.path=r.cache.trafficInfo[p].path,x.rd=r.cache.trafficInfo[p].ref_direct,S.sections.push(x)}u.st2st=S.sections,r.cache.trafficNew.push(u)}console.log("新的画图数据drwData整理完毕！"),console.log("正在转译成Json..."),console.log(JSON.stringify(e.cache.trafficNew))}};t.exports=u},function(module,exports,__webpack_require__){var $=__webpack_require__(4),Hammer=__webpack_require__(10),DrwTraf=__webpack_require__(3),drwSw=__webpack_require__(2),SW=__webpack_require__(5),AllData=__webpack_require__(1),getstureState=0,el=document.getElementById("drag_handle");el.style.transformOrigin="top left";var tip={refreshTimer:{},refreshstate:0,station_w:26,touchStatus:null,curScale:1,allScale:1,dragObj:$("#subwaySvg"),svgOffset:{left:0,top:0},realCenter:{x:$(window).width()/2,y:$(window).height()/2},subwaySvg:document.getElementById("subway-svg"),opentip:!1,transform:{translate:{x:0,y:0},scale:1},transformState:{translate:{x:0,y:0},scale:1},transformOrigin:null,routeState:!1,fromendState:!1,w:AllData.w,h:AllData.h,curCity:AllData.cache.curCity,stationsInfo:AllData.cache.stationsInfo,stations:AllData.cache.stations,lines:AllData.cache.lines,preventScrollBounce:function(t){t.length||t.unshift||(t=[t]),t.forEach(function(t){new Hammer.Manager(t,{recognizers:[[Hammer.Pinch,{direction:Hammer.DIRECTION_VERTICAL}],[Hammer.Swipe,{direction:Hammer.DIRECTION_VERTICAL}]]})})},refreshShow:function(){$(".refresh_box").css("display","block").addClass("refresh_box_show"),$(".refresh_time_text").css("display","block").addClass("refresh_time_text_show"),tip.loadingOver(),clearTimeout(tip.refreshTimer),tip.refreshTimer=setTimeout(function(){$(".refresh_time_text").removeClass("refresh_time_text_show").css("display","none"),$(".refresh_box").removeClass("refresh_box_show").css("display","none"),tip.refreshstate=0},4e3)},refreshSuccess:function(){$(".refresh_time_text").html("更新于"+AllData.refreshStatus);var t=$(".refresh_btn");t.removeClass("refresh_active"),tip.refreshstate=1,tip.refreshShow()},refreshError:function(){var t=$(".refresh_btn");t.removeClass("refresh_active"),$(".refresh_error").css("display","block"),setTimeout(function(){$(".refresh_error").css("display","none"),tip.refreshstate=0},1500)},stoprefresh:function(){$(".refresh_btn").hide(),$(".refresh_time_text").removeClass("refresh_time_text_show").css("display","none"),$(".refresh_box").hide().removeClass("refresh_box_show").css("display","none")},openhelpBox:function(){$(".light_box").css("display","block");var t=$(".help_content"),e=parseInt(t.css("width")),n=(tip.w-e)/2+"px";t.css({left:n}),t.css("display","block"),$(".tip_wrap_out").hide(),$(".refresh_btn").hide(),$(".refresh_time").hide()},closehelpBox:function(){$(".light_box").css("display","none"),$(".help_content").css("display","none")},mcdragSvg:function(t){var e=this;e.transform.translate.x==t.deltaX&&e.transform.translate.y==t.deltaY||(e.transform.translate.x=t.deltaX,e.transform.translate.y=t.deltaY,e.handleUpdate())},mcScaleSvg:function(t){var e,n=this,i=1,r=t.center;"pinchstart"==t.type&&(i=n.transform.scale||1),n.realCenter={x:Number(r.x)-Number(n.svgOffset.left),y:Number(r.y)-Number(n.svgOffset.top)};var a=t.scale;tip.curScale=a,a=a>2?2:a,a=.5>a?.5:a,e=i*a,n.transformOrigin==r&&n.transform.scale==e||(n.transformOrigin=r,n.transform.scale=e,n.handleUpdate())},handleUpdate:function(){var t=this,e=["translate3d("+t.transform.translate.x+"px, "+t.transform.translate.y+"px, 0)","scale("+t.transform.scale+", "+t.transform.scale+")"];e=e.join(" ");var n=document.querySelector("#drag_handle");if(n.style.webkitTransform=e,n.style.transform=e,"pinch"==t.touchStatus){var i=t.transformOrigin.x+"px "+t.transformOrigin.y+"px";n.style.webkitTransformOrigin=i,n.style.transformOrigin=i}},handleReset:function(){var t=this;t.transform.translate.x=0,t.transform.translate.y=0,t.transform.scale=1,t.handleUpdate()},svgUpdate:function(t){var e=$("#svg-g"),n=($("#subwaySvgBody"),e.offset()),i=n.left,r=n.top,a=n.width,s=n.height,o=!0;if(a>tip.w?(Number(i)>Number(tip.w)/2||Math.abs(Number(i))>Number(a-Number(tip.w)/2))&&(o=!1):(0>i+a/2||i+a/2>tip.w)&&(o=!1),s>tip.h?(Number(r)>Number(tip.h)/2||Math.abs(Number(r))>Number(s-Number(tip.h)/2))&&(o=!1):(0>r+s/2||r+s/2>tip.h)&&(o=!1),o){var c=tip.transformState.translate.x+t.deltaX,l=tip.transformState.translate.y+t.deltaY,u=tip.transformState.scale;c&&l&&(e.attr("transform","translate("+c+","+l+") scale("+u+")"),tip.transformState.translate.x=c,tip.transformState.translate.y=l);var f=$(".overlays"),h=parseInt(f.css("left"))||0,p=parseInt(f.css("top"))||0,d=Number(h)+Number(t.deltaX),v=Number(p)+Number(t.deltaY);f.css({left:d+"px",top:v+"px"})}tip.handleReset(),setTimeout(function(){tip.touchStatus=null},100)},scaleSvgUpdate:function(t,e){var n=this;enableGesture=!0;var i=$("#svg-g"),r=($("#subwaySvgBody"),n.transformState.translate.x),a=n.transformState.translate.y,s=n.transformState.scale;tip.allScale=tip.allScale*t;var o=t*s;o>1.3&&(o=1.3,tip.allScale=1.3),.3>o&&(o=.3,tip.allScale=.3),t=o/s;var c=tip.realCenter.x,l=tip.realCenter.y;e&&(c=$(window).width()/2,l=$(window).height()/2);var u=(Number(t)-1)*(Number(c)-Number(r)),f=(Number(t)-1)*(Number(l)-Number(a)),h=r-u,p=a-f;h&&p&&(i.attr("transform","translate("+h+","+p+") scale("+o+")"),n.transformState.translate.x=h,n.transformState.translate.y=p,n.transformState.scale=o),tip.handleReset(),tip.updateTip(),tip.updateNear(),tip.updateMarker(),setTimeout(function(){tip.touchStatus=null},100),setTimeout(function(){enableGesture=!1},100)},setFitview:function(t){var e=this;e.scaleSvgUpdate(1/e.transformState.scale,!0);var n=t.width(),i=t.height(),r=AllData.cache.param&&"alipay"==AllData.cache.param.src?0:$(".top_bar").height(),a=$(".route_bar").height(),s=$(window).width(),o=$(window).height()-r-a,c=s/n,l=o/i,u=1;(1>c||1>l)&&(u=l>c?c-.05:l-.06,e.scaleSvgUpdate(u,!0))},getScaleCenter:function(xy1,xy2){var center={};if(xy1&&xy2){var x1=eval(xy1.x),y1=eval(xy1.y),x2=eval(xy2.x),y2=eval(xy2.y);center.x=(x1+x2)/2,center.y=(y1+y2)/2}return center},closeNearTip:function(){var t=$(".tip-content");drwSw.isNearTip&&t.hasClass("open")&&t.css("display","none").removeClass("open")},loadinfo:function(t,e){var n,i=this,r=[],a=i.stationsInfo[e].d;n=i.stations[e].n;for(var s={},o=0,c=a.length;c>o;o++){var l=a[o];s[l.ls]||(s[l.ls]=[]),s[l.ls].push(l)}$("#tip_name").html(n);for(var u in s)if(s.hasOwnProperty(u)&&i.lines[u]){var f=i.lines[u].la;""==f||(f="("+f+")"),r.push('<div class="tip_detail_line">'),r.push('<label class="line-name">'+i.lines[u].ln+f+"</label>"),r.push("<label class='line-white-label'></label>"),r.push('<ul class="time-item-main">');for(var h=0;2>h;h++)if(s[u][h]){var p=s[u][h].ft,d=s[u][h].lt;p=i.resetTime(p),d=i.resetTime(d);var v=i.stations[s[u][h].n];"--"==p.split(":")[0]&&"--"==d.split(":")[0]||(r.push('<li class="time-item-detail">'),r.push('<div class="train-direct">'+v.n+"方向</div>"),r.push('<div class="train-time fr">'),r.push('<div class="start-time time-box fl"><label class="time-label-start">首</label><span class="time">'+p+"</span></div>"),r.push('<div class="last-time time-box fl"><label class="time-label-end">末</label><span class="time">'+d+"</span></div>"),r.push("</div>"),r.push("</li>"))}r.push("</ul>"),r.push("</div>")}$("#tip_content").html(r.join(""))},openTip:function(t){if(t&&!tip.routeState){var e=this;e.curopenStation=t;var n=t.attr("line_id"),i=t.attr("station_id");e.loadinfo(n,i);var r=t.attr("station_name"),a=t.attr("station_poiid"),s=t.attr("station_lon"),o=t.attr("station_lat"),c=t.attr("station_id");t.attr("line_id").toString();$(".tip_wrap").attr("stid",c).attr("name",r).attr("poiid",a).attr("lon",s).attr("lat",o),$(".tip_wrap_out").show(),e.setTipPos(t),e.opentip=!0;var l=e.topOffset(.4);tip.transformState.translate.y=tip.transformState.translate.y+l}},topOffset:function(t){var e=$(".tip_body").css("height"),n=parseInt(e)*t;return n},setTipPos:function(t){var e=this,n=$(".tip_wrap_out"),i=t&&t.offset()&&t.offset().left,r=t&&t.offset()&&t.offset().top,a=$(".overlays"),s=parseInt(a.css("left"))||0,o=parseInt(a.css("top"))||0;infowindow_left=i+e.station_w*e.allScale/2-s,infowindow_top=r+e.station_w*e.allScale/2-o,n.css({top:infowindow_top+"px",left:infowindow_left+"px"})},closeTip:function(t){$(".tip_wrap_out").hide(),t||(tip.opentip=!1),$(".light_box").css("display","none"),window.location.hash=""},setCenter:function(t){var e=this,n=$("#svg-g");if(t){var i=t.x,r=t.y,a=tip.transformState.translate.x,s=tip.transformState.translate.y,o=tip.transformState.scale,c=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=i-.5*c,f=r-.5*l;a-=u,s-=f,n.attr("transform","translate("+a+","+s+") scale("+o+")"),tip.transformState.translate.x=a,tip.transformState.translate.y=s;var h=e.topOffset(.4),p=$(".overlays"),d=parseInt(p.css("left"))||0,v=parseInt(p.css("top"))||0,m=Number(d)-Number(u),g=Number(v)-Number(f)+h;p.css({left:m+"px",top:g+"px"})}},openFilter:function(){var t=$(".filter_content");$(".light_box, .filter_content").css("display","block");var e=parseInt(t.css("width")),n=parseInt(t.css("height")),i=(tip.w-e)/2+"px",r=(tip.h-n)/2+"px";t.css({top:r,left:i}),$(".tip_wrap_out").hide(),tip.stoprefresh()},closeFilter:function(){$(".light_box, .filter_content").css("display","none"),$(".refresh_btn").show(),$(".refresh_box").show(),$(".refresh_time").show()},getFilterCenter:function(){var t=this,e=$("#g-select").offset(),n=document.getElementById("g-select").getBBox().height*t.allScale,i=document.getElementById("g-select").getBBox().width*t.allScale;return{x:e.left+i/2,y:e.top+n/2}},cityChange:function(){$("#subway").hide(),tip.creatCitylist(),tip.showCitylist()},creatCitylist:function(){var t=SW.cityListData;if(t){for(var e=$("#citylist"),n="",i=0;i<t.length;i++)n+='<li class="cityitem" adcode="'+t[i].adcode+'"><a href="javascript:void(0)">'+t[i].cityname+"</a></li>";e.html(n)}},initCity:function(){tip.allScale=1},showCitylist:function(){$("#citypage").show()},hideCitylist:function(){$("#citypage").hide()},getStCenter:function(t){if(t){var e=t.offset();if(e)return{x:e.left+e.width/2,y:e.top+e.height/2}}},clearMarker:function(t){
if(t){var e=$("#nav_"+t).find(".marker-out");e.length>0&&e.remove()}},updateMarker:function(){if(tip.fromendState){var t=tip.routeId.start,e=tip.routeId.end;t&&tip.updateStartEnd(t,"start"),e&&tip.updateStartEnd(e,"end")}},updateStartEnd:function(t,e){var n=this;if(t){var i=null;i=$("#st-"+t).length>0?$("#st-"+t):n.curStation;var r=i.offset().left,a=i.offset().top,s=$(".overlays"),o=parseInt(s.css("left"))||0,c=parseInt(s.css("top"))||0,l=r+n.station_w*n.allScale/2-o,u=a+n.station_w*n.allScale/2-c,f=$("#nav_"+e);f.css({top:u+"px",left:l+"px"})}},updateTip:function(){var t=this;if(tip.opentip){var e=tip.curopenStation,n=e.offset().left,i=e.offset().top,r=$(".overlays"),a=parseInt(r.css("left"))||0,s=parseInt(r.css("top"))||0,o=n+t.station_w*t.allScale/2-a,c=i+t.station_w*t.allScale/2-s,l=$(".tip_wrap_out");l.css({top:c+"px",left:o+"px"})}},updateNear:function(){var t=this;if(drwSw.nearId){var e=$("#near-"+drwSw.nearId);if(e){var n=e.offset().left,i=e.offset().top,r=$(".overlays"),a=parseInt(r.css("left"))||0,s=parseInt(r.css("top"))||0,o=n+28*t.allScale/2-a,c=i-s,l=$(".tip-content");l.css({top:c+"px",left:o+"px"})}}},formatTime:function(t){if(!t||"0"==t)return"";if(t/=60,60>=t)return parseInt(Math.ceil(t))+"分钟";var e=Math.floor(t/60)+"小时";return t%60!==0&&(0===Math.floor(t%60)||(e+=Math.floor(t%60)+"分钟")),e},unableFlite:function(){$(".filter_btn").css({"z-index":"10"})},ableFilte:function(){$(".filter_btn").css({"z-index":"20"})},resetTime:function(t){if("--:--"!=t){var e=Number(t.split(":")[0]),n=Number(t.split(":")[1]);return e=10>e&&e>0?"0"+e:0==e?"00":e,n=10>n&&n>0?"0"+n:0==n?"00":n,e+":"+n}return t},clearRouteIpt:function(t){var e={start:"输入起点",end:"输入终点"},n=null;"start"==t?n=$("#setStart"):"end"==t&&(n=$("#setEnd")),n.find(".route_startend").html(e[t]).addClass("route_placeholder"),n.find(".route_close").addClass("hidden")},loading:function(){$(".loading-outer").css("position","fixed"),$(".loading-bg").css({position:"fixed",display:"block"}),$(".loading-bg .loading").css("top","-30px")},loadingOver:function(){$(".loading-bg").css("display","none")}};module.exports=tip},function(t,e){window.amapCache=window.amapCache||{},function(t,e){var n,i=!1,r={},a={},s={};try{n=t.localStorage,n.setItem("TEST","TEST"),n.getItem("TEST"),n.removeItem("TEST"),t.enabledLocalstorage=!0}catch(o){t.enabledLocalstorage=!1}var c=function(){for(var t=n.length-1;t>=0;t--){var e=n.key(t),i=e.split("/")[0];"data"==i&&(a[e]||n.removeItem(e))}},l=function(e){$.get(r.versionPath,function(n){s=n,t.amapCache.cacheFileListObj=n,t.amapCache.newestVersion=n;var i;for(i in t.amapCache.newestVersion)if(t.amapCache.newestVersion.hasOwnProperty(i)){i.split("/")[1].split("_")[0];a[i+"_"+t.amapCache.newestVersion[i]]=!0}c(),e&&e()},"json")},u=function(t){i?(r.versionPath=t.versionPath||"data/version/version.json",l(t.complete)):t.complete()},f=function(t,e,n){$.ajax({url:t,type:"get",method:"get",dataType:"json",timeout:15e3,success:e,error:n})},h=function(t,e,r){s[t];if(i){var a=t+"_"+s[t],o=n.getItem(a);o?e("[object String]"==Object.prototype.toString.call(o)?JSON.parse(o):o):f(t,function(t){"[object String]"==Object.prototype.toString.call(t)&&(t=JSON.parse(t)),n.setItem(a,JSON.stringify(t)),e(t)},r)}else f(t,function(t){"[object String]"==Object.prototype.toString.call(t)&&(t=JSON.parse(t)),e(t)},r)};t.amapCache.init=u,t.amapCache.loadData=h,t.amapCache.cacheFileListObj=s,t.amapCache.enabledLocalstorage=i}(window)},function(t,e,n){var i=n(1),r=(n(2),{defaultColor:i.statusColor[0].color,ns_svg:i.ns_svg,doublePathInfo:function(t,e){var n=[],i={},r={};for(var a in t){var s=t[a].split(" ").join(","),o={};if(o.x=parseInt(s.split(",")[0]),o.y=parseInt(s.split(",")[1]),!r)return void(r=o);if(r._a=Math.atan2(o.y-r.y,o.x-r.x),i){r.angle=Math.atan2(Math.sin(i._a)+Math.sin(r._a),Math.cos(i._a)+Math.cos(r._a)),r.angle-=Math.PI/2;var c=Math.abs(r._a-i._a);c>Math.PI&&(c=2*Math.PI-c),r.inclinedAngle=Math.PI-c}else r.angle=r._a-Math.PI/2;i=r,r=o,n.push(i._a)}n[0]=n[1];var l={},u=[],f=[];l.LeftPath=u,l.RightPath=f;for(var a in t){var s=t[a].split(" ").join(","),o={};o.x=parseInt(s.split(",")[0]),o.y=parseInt(s.split(",")[1]);var h=parseInt(1e8*n[a]),p="",d="";0==h||314159265==h||-157079632==h||157079632==h?(p=parseInt(e*Math.cos(Math.PI/2-n[a]))/10,d=parseInt(e*Math.sin(Math.PI/2+n[a]))/10):(p=parseInt((e+2)*Math.cos(Math.PI/2-n[a]))/10,d=parseInt((e+2)*Math.sin(Math.PI/2+n[a]))/10);var v=o.x+p,m=o.y-d;u.push(v+" "+m);var g=o.x-p,y=o.y+d;f.push(g+" "+y)}return l},drwDouble:function(t,e){var n=this,i=e.c,r=e.st,a=r[0].n,s=r[r.length-1].n,o={},c={};o.path=n.doublePathInfo(i,26).LeftPath,c.path=n.doublePathInfo(i,26).RightPath,o.color=n.defaultColor,c.color=n.defaultColor,o.direction=s+"-to-"+a,c.direction=a+"-to-"+s,o.reflineName=e.ln,c.reflineName=e.ln;var l=e.ls;"110005"==l?n.drwlines(t,c,e):(n.drwlines(t,o,e),n.drwlines(t,c,e))},drwlines:function(t,e,n){var i=e.path,a=e.direction,s="M"+i[0].split(" ").join(","),o=s+"L"+i.join("L"),c=document.createElementNS(this.ns_svg,"path");c.setAttribute("name","line-"+e.reflineName+"-"+a);var l={};l=e.color?e.color:r.defaultColor;var u="";u=e.loadRate?e.loadRate:"No Data!",c.setAttribute("stroke","#"+l),c.setAttribute("d",o),c.setAttribute("loadRate",u),t.appendChild(c)}});t.exports=r},function(t,e,n){"use strict";var i=n(5);i.swInit()},function(t,e,n){var i;/*! Hammer.JS - v2.0.6 - 2016-01-06
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the  license */
!function(r,a,s,o){"use strict";function c(t,e,n){return setTimeout(p(t,n),e)}function l(t,e,n){return Array.isArray(t)?(u(t,n[e],n),!0):!1}function u(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function f(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=r.console&&(r.console.warn||r.console.log);return a&&a.call(r.console,i,n),t.apply(this,arguments)}}function h(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&ft(i,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==dt?t.apply(e?e[0]||o:o,e):t}function v(t,e){return t===o?e:t}function m(t,e,n){u(w(e),function(e){t.addEventListener(e,n,!1)})}function g(t,e,n){u(w(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function _(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function S(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var i=[],r=[],a=0;a<t.length;){var s=e?t[a][e]:t[a];_(r,s)<0&&i.push(t[a]),r[a]=s,a++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function T(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),a=0;a<ht.length;){if(n=ht[a],i=n?n+r:e,i in t)return i;a++}return o}function E(){return wt++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function I(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function N(t){var e,n=t.options.inputClass;return new(e=n?n:xt?z:Tt?Y:St?W:H)(t,A)}function A(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,a=e&Pt&&i-r===0,s=e&(Ot|kt)&&i-r===0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=k(e)),r>1&&!n.firstMultiple?n.firstMultiple=k(e):1===r&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,o=s?s.center:a.center,c=e.center=L(i);e.timeStamp=gt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=F(o,c),e.distance=$(o,c),D(n,e),e.offsetDirection=M(e.deltaX,e.deltaY);var l=j(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=mt(l.x)>mt(l.y)?l.x:l.y,e.scale=s?B(s.pointers,i):1,e.rotation=s?R(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,O(n,e);var u=t.element;y(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function D(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};(e.eventType===Pt||a.eventType===Ot)&&(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function O(t,e){var n,i,r,a,s=t.lastInterval||e,c=e.timeStamp-s.timeStamp;if(e.eventType!=kt&&(c>At||s.velocity===o)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,f=j(c,l,u);i=f.x,r=f.y,n=mt(f.x)>mt(f.y)?f.x:f.y,a=M(l,u),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=a}function k(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:vt(t.pointers[n].clientX),clientY:vt(t.pointers[n].clientY)},n++;return{timeStamp:gt(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:vt(t[0].clientX),y:vt(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:vt(n/e),y:vt(i/e)}}function j(t,e,n){return{x:e/t||0,y:n/t||0}}function M(t,e){return t===e?Lt:mt(t)>=mt(e)?0>t?jt:Mt:0>e?$t:Ft}function $(t,e,n){n||(n=zt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function F(t,e,n){n||(n=zt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function R(t,e){return F(e[1],e[0],qt)+F(t[1],t[0],qt)}function B(t,e){return $(e[0],e[1],qt)/$(t[0],t[1],qt)}function H(){this.evEl=Yt,this.evWin=Ut,this.allow=!0,this.pressed=!1,I.apply(this,arguments)}function z(){this.evEl=Zt,this.evWin=Jt,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Kt,this.evWin=Qt,this.started=!1,I.apply(this,arguments)}function X(t,e){var n=S(t.touches),i=S(t.changedTouches);return e&(Ot|kt)&&(n=x(n.concat(i),"identifier",!0)),[n,i]}function Y(){this.evTarget=ee,this.targetIds={},I.apply(this,arguments)}function U(t,e){var n=S(t.touches),i=this.targetIds;if(e&(Pt|Dt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,s=S(t.changedTouches),o=[],c=this.target;if(a=n.filter(function(t){return y(t.target,c)}),e===Pt)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&o.push(s[r]),e&(Ot|kt)&&delete i[s[r].identifier],r++;return o.length?[x(a.concat(o),"identifier",!0),o]:void 0}function W(){I.apply(this,arguments);var t=p(this.handler,this);this.touch=new Y(this.manager,t),this.mouse=new H(this.manager,t)}function V(t,e){this.manager=t,this.set(e)}function Z(t){if(b(t,oe))return oe;var e=b(t,ce),n=b(t,le);return e&&n?oe:e||n?e?ce:le:b(t,se)?se:ae}function J(t){this.options=ft({},this.defaults,t||{}),this.id=E(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ue,this.simultaneous={},this.requireFail=[]}function G(t){return t&ve?"cancel":t&pe?"end":t&he?"move":t&fe?"start":""}function K(t){return t==Ft?"down":t==$t?"up":t==jt?"left":t==Mt?"right":""}function Q(t,e){var n=e.manager;return n?n.get(t):t}function tt(){J.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function nt(){tt.apply(this,arguments)}function it(){J.apply(this,arguments),this._timer=null,this._input=null}function rt(){tt.apply(this,arguments)}function at(){tt.apply(this,arguments)}function st(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ot(t,e){return e=e||{},e.recognizers=v(e.recognizers,ot.defaults.preset),new ct(t,e)}function ct(t,e){this.options=ft({},ot.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=N(this),this.touchAction=new V(this,this.options.touchAction),lt(this,!0),u(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var n=t.element;n.style&&u(t.options.cssProps,function(t,i){n.style[T(n.style,i)]=e?t:""})}function ut(t,e){var n=a.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var ft,ht=["","webkit","Moz","MS","ms","o"],pt=a.createElement("div"),dt="function",vt=Math.round,mt=Math.abs,gt=Date.now;ft="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var yt=f(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===o)&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),bt=f(function(t,e){return yt(t,e,!0)},"merge","Use `assign`."),wt=1,_t=/mobile|tablet|ip(ad|hone|od)|android/i,St="ontouchstart"in r,xt=T(r,"PointerEvent")!==o,Tt=St&&_t.test(navigator.userAgent),Et="touch",Ct="pen",It="mouse",Nt="kinect",At=25,Pt=1,Dt=2,Ot=4,kt=8,Lt=1,jt=2,Mt=4,$t=8,Ft=16,Rt=jt|Mt,Bt=$t|Ft,Ht=Rt|Bt,zt=["x","y"],qt=["clientX","clientY"];I.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)}};var Xt={mousedown:Pt,mousemove:Dt,mouseup:Ot},Yt="mousedown",Ut="mousemove mouseup";h(H,I,{handler:function(t){var e=Xt[t.type];e&Pt&&0===t.button&&(this.pressed=!0),e&Dt&&1!==t.which&&(e=Ot),this.pressed&&this.allow&&(e&Ot&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:It,srcEvent:t}))}});var Wt={pointerdown:Pt,pointermove:Dt,pointerup:Ot,pointercancel:kt,pointerout:kt},Vt={2:Et,3:Ct,4:It,5:Nt},Zt="pointerdown",Jt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Zt="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),h(z,I,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Wt[i],a=Vt[t.pointerType]||t.pointerType,s=a==Et,o=_(e,t.pointerId,"pointerId");r&Pt&&(0===t.button||s)?0>o&&(e.push(t),o=e.length-1):r&(Ot|kt)&&(n=!0),0>o||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(o,1))}});var Gt={touchstart:Pt,touchmove:Dt,touchend:Ot,touchcancel:kt},Kt="touchstart",Qt="touchstart touchmove touchend touchcancel";h(q,I,{handler:function(t){var e=Gt[t.type];if(e===Pt&&(this.started=!0),this.started){var n=X.call(this,t,e);e&(Ot|kt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}}});var te={touchstart:Pt,touchmove:Dt,touchend:Ot,touchcancel:kt},ee="touchstart touchmove touchend touchcancel";h(Y,I,{handler:function(t){var e=te[t.type],n=U.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}}),h(W,I,{handler:function(t,e,n){var i=n.pointerType==Et,r=n.pointerType==It;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Ot|kt)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ne=T(pt.style,"touchAction"),ie=ne!==o,re="compute",ae="auto",se="manipulation",oe="none",ce="pan-x",le="pan-y";V.prototype={set:function(t){t==re&&(t=this.compute()),ie&&this.manager.element.style&&(this.manager.element.style[ne]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){if(!ie){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=b(i,oe),a=b(i,le),s=b(i,ce);if(r){var o=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(o&&c&&l)return}if(!s||!a)return r||a&&n&Rt||s&&n&Bt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ue=1,fe=2,he=4,pe=8,de=pe,ve=16,me=32;J.prototype={defaults:{},set:function(t){return ft(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===_(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=_(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;pe>i&&e(n.options.event+G(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=pe&&e(n.options.event+G(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=me)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(me|ue)))return!1;t++}return!0},recognize:function(t){var e=ft({},t);return d(this.options.enable,[this,e])?(this.state&(de|ve|me)&&(this.state=ue),this.state=this.process(e),void(this.state&(fe|he|pe|ve)&&this.tryEmit(e))):(this.reset(),void(this.state=me))},process:function(t){},getTouchAction:function(){},reset:function(){}},h(tt,J,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(fe|he),r=this.attrTest(t);return i&&(n&kt||!r)?e|ve:i||r?n&Ot?e|pe:e&fe?e|he:fe:me}}),h(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function(){var t=this.options.direction,e=[];return t&Rt&&e.push(le),t&Bt&&e.push(ce),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,a=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Rt?(r=0===a?Lt:0>a?jt:Mt,n=a!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?Lt:0>s?$t:Ft,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=K(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(nt,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(it,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ot|kt)&&!r)this.reset();else if(t.eventType&Pt)this.reset(),this._timer=c(function(){this.state=de,this.tryEmit()},e.time,this);else if(t.eventType&Ot)return de;return me},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===de&&(t&&t.eventType&Ot?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=gt(),this.manager.emit(this.options.event,this._input)))}}),h(rt,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),h(at,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|Bt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Rt|Bt)?e=t.overallVelocity:n&Rt?e=t.overallVelocityX:n&Bt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&mt(e)>this.options.velocity&&t.eventType&Ot},emit:function(t){var e=K(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(st,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Pt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Ot)return this.failTimeout();var a=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||$(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t;var o=this.count%e.taps;if(0===o)return this.hasRequireFailures()?(this._timer=c(function(){this.state=de,this.tryEmit()},e.interval,this),fe):de}return me},failTimeout:function(){return this._timer=c(function(){this.state=me},this.options.interval,this),me},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==de&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ot.VERSION="2.0.6",ot.defaults={domEvents:!1,touchAction:re,enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[nt,{enable:!1},["rotate"]],[at,{direction:Rt}],[et,{direction:Rt},["swipe"]],[st],[st,{event:"doubletap",taps:2},["tap"]],[it]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ge=1,ye=2;ct.prototype={set:function(t){return ft(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ye:ge},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&de)&&(r=e.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],e.stopped===ye||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(fe|he|pe)&&(r=e.curRecognizer=n),a++}},get:function(t){if(t instanceof J)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=_(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){var n=this.handlers;return u(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return u(w(t),function(t){e?n[t]&&n[t].splice(_(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&ut(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ft(ot,{INPUT_START:Pt,INPUT_MOVE:Dt,INPUT_END:Ot,INPUT_CANCEL:kt,STATE_POSSIBLE:ue,STATE_BEGAN:fe,STATE_CHANGED:he,STATE_ENDED:pe,STATE_RECOGNIZED:de,STATE_CANCELLED:ve,STATE_FAILED:me,DIRECTION_NONE:Lt,DIRECTION_LEFT:jt,DIRECTION_RIGHT:Mt,DIRECTION_UP:$t,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:Ht,Manager:ct,Input:I,TouchAction:V,TouchInput:Y,MouseInput:H,PointerEventInput:z,TouchMouseInput:W,SingleTouchInput:q,Recognizer:J,AttrRecognizer:tt,Tap:st,Pan:et,Swipe:at,Pinch:nt,Rotate:rt,Press:it,on:m,off:g,each:u,merge:bt,extend:yt,assign:ft,inherit:h,bindFn:p,prefixed:T});var be="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};be.Hammer=ot,i=function(){return ot}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(window,document,"Hammer")},function(t,e,n){var i=n(1),r=n(12),a=n(6),s=n(4),o=n(3),c=n(2),l={init:function(){this.bindEvent()},bindEvent:function(){document.addEventListener("touchstart",function(){});var t=this,e=s(".refresh_btn"),n=s("#subway"),r=s("#citypage"),u=s("#overlays"),f=document.getElementById("drag_handle"),h=new Hammer.Manager(f,{domEvents:!0});h.add(new Hammer.Pan),h.add(new Hammer.Pinch);var p=!0,d="",v=!1;h.on("panmove",function(t){p&&(a.touchStatus="pan",d="pan",a.mcdragSvg(t))}),h.on("pinchstart pinchmove",function(t){p&&(a.touchStatus="pinch",d="pinch","pinchstart"==t.type&&(a.svgOffset=c.svgOffset||a.svgOffset,v=!1),a.mcScaleSvg(t))}),h.on("pinchend",function(t){setTimeout(function(){v||a.scaleSvgUpdate(a.transform.scale)},0)}),h.on("hammer.input",function(t){t.isFinal&&("pinch"==d&&(a.scaleSvgUpdate(a.transform.scale),v=!0),"pan"==d&&a.svgUpdate(t),p=!1,setTimeout(function(){p=!0},50))}),n.on("touchend","g",function(){if(!a.touchStatus&&s(this).hasClass("line_name")){var e=s(this).attr("lineid"),n=i.cache.lines[e].ln,r=n.split("/")[0].toString().substr(0,4);s(".filter_btn").html(r),t.showFilterLine(e);var o=s("#g-select");a.setFitview(o);var c=a.getFilterCenter();a.setCenter(c)}}),n.on("touchend","#g-bg",function(){a.routeState||a.touchStatus||(s("#g-select").remove(),s("#g-bg").css("display","none"),s(".filter_btn").html("线路图"))}),n.on("touchend",".light_box",function(t){if(!a.touchStatus&&!a.routeState){var e=t.target;"station_obj"==e.getAttribute("class")&&"nav-img"==e.getAttribute("class")||(a.closeTip(),a.closehelpBox())}}),n.on("touchend",".station_obj",function(t){if(t.stopPropagation(),!a.touchStatus&&!a.routeState){var e=s(this).attr("station_id");a.closeFilter(),s(".light_box").css("display","block"),window.location.hash="#station="+e}}),u.on("touchend",".tip_wrap",function(t){t.stopPropagation()}),u.on("touchstart",".tip_wrap",function(t){t.stopPropagation()}),s(".top_bar").on("touchend",function(){a.closeTip(),a.closeFilter()}),s(".light_box").on("touchmove",function(t){t.preventDefault()}),s("#loading").on("touchmove",function(t){t.preventDefault()}),s(".light_box").on("touchend",function(){a.closeFilter(),a.closehelpBox()}),e.on("touchend",function(t){if(t.stopPropagation(),0==a.refreshstate){a.refreshstate=1;var e=s(".refresh_btn");e.addClass("refresh_active");var n=i.cache.curCity.adcode,r=i.fileNameData[i.cache.curCity.adcode],l="normal";o.loadTraffic(n,r),o.drwTrafficLinesDefer(c.currLines,l)}else t.stopPropagation()}),s(".filter_btn").on("touchend",function(){a.closehelpBox(),a.routeState||a.openFilter()}),s(".fliter_detail").on("touchend",".fliter_item",function(){if(!g){var e=s(this).attr("lineid"),n=s(this).attr("name");if("caption-allLines"==e)a.closeFilter(),l.showAlllines();else{a.closeFilter(),s(".filter_btn").html(n),t.showFilterLine(e);var i=s("#g-select");a.setFitview(i);var r=a.getFilterCenter();a.setCenter(r)}}});var m,g=!1;s(".fliter_detail").on("touchmove",function(t){t.stopPropagation(),g=!0,m&&clearTimeout(m),m=setTimeout(function(){g=!1},60)}),s(".help_btn").on("touchend",function(t){t.stopPropagation(),a.closeFilter(),s(".refresh_time_text").removeClass("refresh_time_text_show").css("display","none"),s(".refresh_box").hide().removeClass("refresh_box_show").css("display","none"),a.openhelpBox()}),s(".help_close").on("touchend",function(t){t.stopPropagation(),a.closehelpBox()}),s(".tip_close").on("touchend",function(t){t.stopPropagation(),a.closeTip()}),s("#back_amap").on("touchend",function(){a.goback()}),s(".city_list_btn").on("touchend",function(){a.cityChange()}),r.on("touchend",".cityitem",function(){var t=s(this).attr("adcode");a.initCity(),window.location.hash="#city="+t,a.hideCitylist(),s("#subway").show()})},showFilterLine:function(t){s("#g-select").remove(),s("#g-bg").css("display","block"),r.drawSelectLine(i.cache.lines[t],"select")},param2json:function(t){if(t&&""!=t){var e=t.split("&"),n={};if(e.length>0)for(var i=0;i<e.length;i++){var r=e[i].split("="),a=r[0],s=r[1];n[a]=s}return n}return null},showAlllines:function(){s(".filter_btn").html("线路图"),s("#g-bg").css("display","none");var t=i.param.city,e=i.cache.cities[t],n={};n.x=e.offset.split(",")[0],n.y=e.offset.split(",")[1];var r={},o=s("#svg-g");a.setFitview(o);var c=o.offset(),l=document.getElementById("svg-g").getBBox().height*a.allScale,u=(1.5*document.getElementById("svg-g").getBBox().width-n.x)*a.allScale;r.x=c.left+u/2,r.y=c.top+l/2,a.setCenter(r)}};t.exports=l},function(t,e,n){var i=n(1),r=n(3),a=n(2),s={ns_svg:i.ns_svg,drawSelectLine:function(t){var e=this,n="select",i=document.getElementById("svg-g"),s=document.createElementNS(e.ns_svg,"g");s.setAttribute("id","g-select"),i.appendChild(s),a.drwSwLines(t,n),a.drwSwStations(t,n),a.drwSwStationsName(t,n,10,20),a.drwSwLinesName(t,n),r.drwTrafficLinesDefer(t,n)}};t.exports=s},function(t,e,n){var i;!function(){"use strict";/**
		 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
		 *
		 * @codingstandard ftlabs-jsv2
		 * @copyright The Financial Times Limited [All Rights Reserved]
		 * @license MIT License (see LICENSE.txt)
		 */
function r(t,e){function n(t,e){return function(){return t.apply(e,arguments)}}var i;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!r.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,c=0,l=a.length;l>c;c++)o[a[c]]=n(o[a[c]],o);s&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(t){i(t)},!1),t.onclick=null)}}var a=navigator.userAgent.indexOf("Windows Phone")>=0,s=navigator.userAgent.indexOf("Android")>0&&!a,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!a,c=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=o&&/OS [6-7]_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;r.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},r.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},r.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},r.prototype.determineEventType=function(t){return s&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},r.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},r.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},r.prototype.onTouchStart=function(t){var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},r.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},r.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},r.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(t){var e,n,i,r,a,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(a=t.changedTouches[0],u=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=u.tagName.toLowerCase(),"label"===i){if(e=this.findControl(u)){if(this.focus(u),s)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-n>100||o&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),o&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return o&&!c&&(r=u.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},r.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},r.prototype.destroy=function(){var t=this.layer;s&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(t){var e,n,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},r.attach=function(t,e){return new r(t,e)},i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}()}]);